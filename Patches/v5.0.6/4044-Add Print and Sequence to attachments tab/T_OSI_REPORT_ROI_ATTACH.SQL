CREATE TABLE WEBI2MS.T_OSI_REPORT_ROI_ATTACH
(
  OBJ         VARCHAR2(20 BYTE)                 NOT NULL,
  ATTACHMENT  VARCHAR2(20 BYTE)                 NOT NULL,
  SEQ         NUMBER
)
TABLESPACE I2MS
LOGGING 
NOCOMPRESS 
NOCACHE
NOPARALLEL
MONITORING;

COMMENT ON TABLE WEBI2MS.T_OSI_REPORT_ROI_ATTACH IS 'Used by the Attachments tab to allow the user to say they want an attachment printed on the ROI and in What Order.';

COMMENT ON COLUMN WEBI2MS.T_OSI_REPORT_ROI_ATTACH.OBJ IS 'Object Sid (Usually an Activity SID)';

COMMENT ON COLUMN WEBI2MS.T_OSI_REPORT_ROI_ATTACH.ATTACHMENT IS 'Attachment SID';

COMMENT ON COLUMN WEBI2MS.T_OSI_REPORT_ROI_ATTACH.SEQ IS 'Order to print.';


CREATE UNIQUE INDEX WEBI2MS.UK_OBJ_ATTACHMENT ON WEBI2MS.T_OSI_REPORT_ROI_ATTACH
(OBJ, ATTACHMENT)
LOGGING
TABLESPACE I2MS
NOPARALLEL;


ALTER TABLE WEBI2MS.T_OSI_REPORT_ROI_ATTACH ADD (
  CONSTRAINT UK_OBJ_ATTACHMENT
 UNIQUE (OBJ, ATTACHMENT)
    USING INDEX 
    TABLESPACE I2MS
);


ALTER TABLE WEBI2MS.T_OSI_REPORT_ROI_ATTACH ADD (
  CONSTRAINT FK_OBJECT_SID 
 FOREIGN KEY (OBJ) 
 REFERENCES WEBI2MS.T_CORE_OBJ (SID)
    ON DELETE CASCADE);

ALTER TABLE WEBI2MS.T_OSI_REPORT_ROI_ATTACH ADD (
  CONSTRAINT FK_ATTACHMENT_SID 
 FOREIGN KEY (ATTACHMENT) 
 REFERENCES WEBI2MS.T_OSI_ATTACHMENT (SID)
    ON DELETE CASCADE);


