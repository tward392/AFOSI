SET DEFINE OFF;
CREATE TABLE WEBI2MS.T_OSI_A_RECORDS_CHECK_MULTI
(
  SID                  VARCHAR2(20 BYTE),
  TITLE                VARCHAR2(100 BYTE),
  ACTIVITY_DATE        DATE,
  SUBJECT_OF_ACTIVITY  VARCHAR2(20 BYTE),
  DOC_TYPE             VARCHAR2(20 BYTE),
  RESULTS              VARCHAR2(10 BYTE),
  REFERENCE_NUMBER     VARCHAR2(100 BYTE),
  RESTRICTION          VARCHAR2(20 BYTE),
  NARRATIVE            CLOB,
  PERSONNEL            VARCHAR2(20 BYTE),
  FILE_SID             VARCHAR2(20 BYTE),
  WH_PAY_CAT           VARCHAR2(20 BYTE),
  WH_DUTY_CAT          VARCHAR2(20 BYTE),
  WH_MISSION           VARCHAR2(20 BYTE),
  WH_DATE              VARCHAR2(20 BYTE),
  WH_HOURS             VARCHAR2(20 BYTE),
  COMPLETE             VARCHAR2(1 BYTE)
);


CREATE OR REPLACE TRIGGER WEBI2MS."OSI_REC_CHECK_MULTI_B_I_SID" 
    before insert on T_OSI_A_RECORDS_CHECK_MULTI for each row begin
    if :new.SID is null then
       :new.SID := Core_Sidgen.NEXT_SID;
    end if;
end;

ALTER TABLE WEBI2MS.T_OSI_A_RECORDS_CHECK_MULTI ADD (
  CONSTRAINT FK_OSI_A_RC_M_PART
  FOREIGN KEY (SUBJECT_OF_ACTIVITY)
  REFERENCES WEBI2MS.T_OSI_PARTICIPANT (SID),
  CONSTRAINT FK_OSI_A_RC_M_PERSONNEL
  FOREIGN KEY (PERSONNEL)
  REFERENCES WEBI2MS.T_CORE_PERSONNEL (SID),
  CONSTRAINT FK_OSI_A_RC_M_REST
  FOREIGN KEY (RESTRICTION)
  REFERENCES WEBI2MS.T_OSI_REFERENCE (SID),
  CONSTRAINT FK_OSI_A_RC_M_TYPE
  FOREIGN KEY (DOC_TYPE)
  REFERENCES WEBI2MS.T_OSI_REFERENCE (SID),
  CONSTRAINT FK_OSI_A_RC_M_RESULTS
  FOREIGN KEY (RESULTS)
  REFERENCES WEBI2MS.T_OSI_A_RECORDS_CHECK_RESULTS (CODE));